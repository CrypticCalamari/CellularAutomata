<script>
var CA = CA || {};

CA.Defaults = (function() {
    return {
        init: function() {
            CA.states = [
                {name: 'Empty', color: 'rgb(0,0,0)'},
                {name: 'Full', color: 'rgb(255,255,255)'},
                {name: 'Cold', color: 'rgb(0,200,100)'},
                {name: 'Hot', color: 'rgb(255,0,0)'},
                {name: 'Winter', color: 'rgb(0,255,255)'},
                {name: 'Spring', color: 'rgb(0,255,0)'},
                {name: 'Summer', color: 'rgb(0,0,255)'},
                {name: 'Fall', color: 'rgb(255,255,0)'},
                {name: 'Acid', color: 'rgb(150,0,150)'}
            ];
            CA.viewRegionMap = [
                {name: 'Hero', color: 'rgb(0,0,255)'},
                {name: 'Anti-Hero', color: 'rgb(255,0,0)'}
            ];
            CA.regions = [];
            var conwayRegion = new CA.Region();
            var heroRegion = new CA.Region();
            var antiHeroRegion = new CA.Region();

            var nonRule = new CA.Rule( CA.PopulationRule );
            var deadRule = new CA.Rule( CA.PopulationRule );
            var liveRule = new CA.Rule( CA.PopulationRule );
            var heroRule = new CA.Rule( CA.PopulationRule );
            var antiHeroRule = new CA.Rule( CA.PopulationRule );
            var blarghRule = new CA.Rule( CA.PopulationRule );
            var garbleRule = new CA.Rule( CA.PopulationRule );

            var _0 = new CA.Cell(); _0.state = 0;
            var _1 = new CA.Cell(); _1.state = 1;
            var _2 = new CA.Cell(); _2.state = 2;
            var _3 = new CA.Cell(); _3.state = 3;
            var _4 = new CA.Cell(); _4.state = 4;
            var _5 = new CA.Cell(); _5.state = 5;
            var _6 = new CA.Cell(); _6.state = 6;
            var _7 = new CA.Cell(); _7.state = 7;
            var _8 = new CA.Cell(); _8.state = 8;

            deadRule.addFilter( CA.PopulationRule.getFilter( [_1, _1, _1, _0, _0, _0, _0, _0], 1 ) );
            deadRule.addFilter( CA.PopulationRule.getFilter( [_1, _1, _1, _0, _0, _0, _0, _0], 1 ) );
            deadRule.addFilter( CA.PopulationRule.getFilter( [_1, _2, _0, _0, _0, _0, _0, _0], 1 ) );
            deadRule.addFilter( CA.PopulationRule.getFilter( [_2, _1, _1, _1, _0, _0, _0, _0], 1 ) );
            deadRule.addFilter( CA.PopulationRule.getFilter( [_2, _2, _1, _1, _0, _0, _0, _0], 1 ) );
            deadRule.addFilter( CA.PopulationRule.getFilter( [_2, _2, _2, _1, _0, _0, _0, _0], 1 ) );

            liveRule.addFilter( CA.PopulationRule.getFilter( [_1, _1, _1, _1, _1, _0, _0, _0], 0 ) );
            liveRule.addFilter( CA.PopulationRule.getFilter( [_1, _1, _1, _1, _1, _2, _0, _0], 0 ) );
            liveRule.addFilter( CA.PopulationRule.getFilter( [_1, _1, _1, _1, _1, _2, _2, _0], 0 ) );

            conwayRegion.setRule( 0, deadRule );
            conwayRegion.setRule( 1, liveRule );
            conwayRegion.setRule( 2, nonRule );
            conwayRegion.setRule( 3, nonRule );
            conwayRegion.setRule( 4, nonRule );
            conwayRegion.setRule( 5, nonRule );
            conwayRegion.setRule( 6, nonRule );
            conwayRegion.setRule( 7, nonRule );
            conwayRegion.setRule( 8, nonRule );

            heroRule.addFilter( CA.PopulationRule.getFilter( [_2, _0, _0, _0, _0, _0, _0, _0], 2 ) );
            
            heroRule.addFilter( CA.PopulationRule.getFilter( [_1, _0, _0, _0, _0, _0, _0, _0], 2 ) );
            heroRule.addFilter( CA.PopulationRule.getFilter( [_1, _1, _0, _0, _0, _0, _0, _0], 2 ) );
            heroRule.addFilter( CA.PopulationRule.getFilter( [_1, _1, _1, _0, _0, _0, _0, _0], 2 ) );

            blarghRule.addFilter( CA.PopulationRule.getFilter( [_0, _0, _0, _0, _0, _0, _0, _0], 0 ) );
            blarghRule.addFilter( CA.PopulationRule.getFilter( [_2, _0, _0, _0, _0, _0, _0, _0], 0 ) );
            blarghRule.addFilter( CA.PopulationRule.getFilter( [_2, _2, _2, _0, _0, _0, _0, _0], 0 ) );
            blarghRule.addFilter( CA.PopulationRule.getFilter( [_2, _2, _2, _2, _0, _0, _0, _0], 0 ) );
            blarghRule.addFilter( CA.PopulationRule.getFilter( [_2, _2, _2, _2, _2, _0, _0, _0], 0 ) );
            blarghRule.addFilter( CA.PopulationRule.getFilter( [_2, _2, _2, _2, _2, _2, _0, _0], 0 ) );
            blarghRule.addFilter( CA.PopulationRule.getFilter( [_2, _2, _2, _2, _2, _2, _2, _0], 0 ) );
            blarghRule.addFilter( CA.PopulationRule.getFilter( [_2, _2, _2, _2, _2, _2, _2, _2], 0 ) );

            heroRegion.setRule( 0, heroRule );
            heroRegion.setRule( 1, nonRule );
            heroRegion.setRule( 2, blarghRule );
            heroRegion.setRule( 3, nonRule );
            heroRegion.setRule( 4, nonRule );
            heroRegion.setRule( 5, nonRule );
            heroRegion.setRule( 6, nonRule );
            heroRegion.setRule( 7, nonRule );
            heroRegion.setRule( 8, nonRule );

            CA.board = new CA.Board( 50, 50 );
            CA.Town.moore( CA.board );

            for (var x = 0; x < CA.board.width; x++) {
                for (var y = 0; y < 25; y++) {
                    CA.board.setCellRegion( x, y, conwayRegion );
                }
            }
            
            for (var x = 0; x < CA.board.width; x++) {
                for (var y = 25; y < CA.board.height; y++) {
                    CA.board.setCellRegion( x, y, heroRegion );
                }
            }
        }
    };
})();

CA.Defaults.init();

console.log('Defaults.html processed');
</script>
